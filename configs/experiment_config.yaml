# =============================================================================
# Experiment Configuration
# =============================================================================
#
# Description:
#   Master configuration for running comparison experiments between
#   centralized and federated learning approaches.
#
# Usage:
#   python run_experiment.py --mode comparison --config configs/experiment_config.yaml
#
# =============================================================================

experiment:
  name: DSCATNet-FL-SkinCancer
  description: "Evaluating DSCATNet in Federated Learning for Dermoscopic Classification"
  seed: 42

# =============================================================================
# Hardware Settings
# =============================================================================
hardware:
  device: cuda              # cuda or cpu
  num_workers: 2            # DataLoader workers (reduced for memory)
  pin_memory: true
  mixed_precision: true     # Enable AMP for faster training

# =============================================================================
# Data Settings
# =============================================================================
data:
  root_dir: ./data
  img_size: 224
  val_split: 0.15
  test_split: 0.15
  
  # Preprocessing
  normalization: imagenet   # Options: imagenet, dermoscopy
  augmentation_level: medium  # Options: light, medium, heavy
  
  # Classification Mode
  # Options:
  #   - multiclass: 7 classes (HAM10000/ISIC2018 compatible)
  #   - multiclass_8: 8 classes (includes SCC from ISIC2019)
  #   - binary: 2 classes (benign vs malignant)
  classification_mode: multiclass
  num_classes: 7
  
  # Label Handling
  filter_unknown: true      # Filter out UNK labels
  
  # Class Imbalance Handling
  use_weighted_sampling: false
  use_class_weights: true

# =============================================================================
# Centralized Training Baseline
# =============================================================================
centralized:
  epochs: 100
  batch_size: 8
  learning_rate: 0.001
  weight_decay: 0.0001
  early_stopping_patience: 15
  pooled_data: true         # Combine all datasets

# =============================================================================
# Federated Training Experiments
# =============================================================================
federated_experiments:
  # Experiment 1: Natural Non-IID
  - name: natural_noniid
    description: "Each client trains on its own dataset"
    num_rounds: 100
    local_epochs: 3
    batch_size: 8
    noniid_type: natural
    
  # Experiment 2: IID Baseline
  - name: iid_baseline
    description: "Pooled data uniformly distributed (Dirichlet α=1000)"
    num_rounds: 100
    local_epochs: 3
    batch_size: 8
    noniid_type: dirichlet
    dirichlet_alpha: 1000
    
  # Experiment 3: Moderate Non-IID
  - name: moderate_noniid
    description: "Dirichlet distribution with α=0.5"
    num_rounds: 100
    local_epochs: 3
    batch_size: 8
    noniid_type: dirichlet
    dirichlet_alpha: 0.5
    
  # Experiment 4: Extreme Non-IID
  - name: extreme_noniid
    description: "Dirichlet distribution with α=0.1"
    num_rounds: 100
    local_epochs: 3
    batch_size: 8
    noniid_type: dirichlet
    dirichlet_alpha: 0.1

# =============================================================================
# Evaluation Metrics
# =============================================================================
metrics:
  classification:
    - accuracy
    - balanced_accuracy
    - precision
    - recall
    - f1_score
    - auc_roc
    - confusion_matrix
    
  federated:
    - convergence_rounds
    - communication_cost
    - client_drift
    - round_time
    
  per_class:
    - sensitivity
    - specificity

# =============================================================================
# Logging and Checkpoints
# =============================================================================
logging:
  log_dir: ./logs
  checkpoint_dir: ./checkpoints
  tensorboard: true
  wandb:
    enabled: false
    project: dscatnet-fl
    entity: null

# =============================================================================
# Reproducibility
# =============================================================================
reproducibility:
  deterministic: true
  benchmark: false
  seed: 42
